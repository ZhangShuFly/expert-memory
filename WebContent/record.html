<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>停车助手</title>
<meta name="viewport" content="initial-scale=1, maximum-scale=1">
<link rel="shortcut icon" href="./assets/40-ecology.png">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">

<link rel="stylesheet" href="./dist/css/sm.css">
<link rel="stylesheet" href="./dist/css/sm-extend.css">
<link rel="stylesheet" href="./assets/css/demos.css">

<link rel="apple-touch-icon-precomposed" href="./assets/40-ecology.png">
<script src="./assets/js/zepto.js"></script>
<script src="./assets/js/config.js"></script>

<script src="./assets/js/vue/vue.min.js"></script>
<script src="./assets/js/vue/vue-resource.min.js"></script>


<script>
	
</script>

</head>
<body>
	<!-- page集合的容器，里面放多个平行的.page，其他.page作为内联页面由路由控制展示 -->
	<div class="page-group">
		<!-- index ,第一个.page默认被展示-->
		<div class="page" id = "recordPage">
			<!-- 标题栏 -->
			<header class="bar bar-nav">
				<a class="icon icon-me pull-left" id="openMenu"></a>
				<h1 class="title">停车助手</h1>
				<a class="icon icon-refresh pull-right"
					href="javascript:window.location.reload();"></a>
			</header>

			<!-- 工具栏 -->
			<nav class="bar bar-tab">
				<a class="tab-item " href="./index.html"> <span
					class="icon icon-home"></span> <span class="tab-label">首页</span>
				</a> <a class="tab-item active" href="#"> <span
					class="icon icon-star"></span> <span class="tab-label">记录</span>
				</a> <a class="tab-item " href="./myset.html"> <span
					class="icon icon-settings"></span> <span class="tab-label">设置</span>
				</a>
			</nav>

			<!-- 这里是页面内容区 -->
			<div class="content pull-to-refresh-content">
			
				<div class="pull-to-refresh-layer">
					<div class="preloader"></div>
					<div class="pull-to-refresh-arrow"></div>
				</div>

				<div class="content-block">
					<div class="list-block" v-for="record in recordList">
						<ul>
							<li class="item-content">
								<div class="item-media">
									<i class="icon icon-browser"></i>
								</div>
								<div class="item-inner">
									<div class="item-title">地点</div>
									<div class="item-after">{{record.parkName}}</div>
								</div>
							</li>
							<li class="item-content">
								<div class="item-media">
									<i class="icon icon-clock"></i>
								</div>
								<div class="item-inner">
									<div class="item-title">时间</div>
									<div class="item-after">{{record.parkStart}}</div>
								</div>
							</li>
							<li class="item-content">
								<div class="item-media">
									<i class="icon icon-code"></i>
								</div>
								<div class="item-inner">
									<div class="item-title">时长/收费</div>
									<div class="item-after">36分/{{record.fee / 100}}元</div>
								</div>
							</li>
						</ul>
					</div>

				</div>
			</div>

		</div>
	</div>

	<!-- popup, panel 等放在这里 -->
	<div class="panel-overlay"></div>
	<!-- Left Panel with Reveal effect -->
	<div class="panel panel-left panel-reveal" id="menuPanel">
		<iframe name="toppage" width=100% height=100% marginwidth=0 marginheight=0 frameborder="no" border="0"  src="menu.html" ></iframe> 
	</div>
	<script src="./dist/js/common.js"></script>
	<script src="./dist/js/sm.js"></script>
	<script src="./dist/js/sm-extend.js"></script>
	<script src="./dist/js/sm-city-picker.js"></script>
	<script src="./assets/js/demos.js"></script>
	<script type="text/javascript">
		$(function(){
			getUser();
		});
		
		var recordVue = new Vue({
		    el:'#recordPage',
		    data: {
		    	recordList:{}
		    },
			methods: {
				getCars:function(){
					this.$http.post(getParkRecord, {phone:getCookie("user")}).then(function(response) {
						recordVue.recordList = response.body;
						if(null == response.body[0]){
							$.toast("暂无记录");
						}
		            }, function(response) {
		            	$.toast("网络连接失败");
		            });
				}
			}
		});
		
		recordVue.getCars();
		
	</script>
</body>
</html>